{"version":3,"file":"bundle.js","sources":["../src/constants.js","../src/button.js","../src/icon.js","../src/select.js","../src/toolbar.js","../src/input.js","../src/editor.js","../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["export const BEFORE_BEGIN = \"beforebegin\";\nexport const BEFORE_END = \"beforeend\";\nexport const TOOLBAR_ITEM = \"__toolbar-item\";\nexport const NO = \"no\";\n","import { BEFORE_END, TOOLBAR_ITEM } from \"./constants\";\n\nexport const createButton = (commandId, title, children, execCommand) => {\n  const button = document.createElement(\"button\");\n  button.dataset.commandId = commandId;\n  button.className = TOOLBAR_ITEM;\n  button.title = title;\n  button.type = \"button\";\n  button.insertAdjacentElement(BEFORE_END, children);\n  button.addEventListener(\"click\", () => execCommand(commandId));\n\n  return button;\n};\n","export const createIcon = (className) => {\n  const icon = document.createElement(\"i\");\n  icon.className = className;\n\n  return icon;\n};\n","import { BEFORE_END, TOOLBAR_ITEM } from \"./constants\";\n\nconst createOption = (value, text, selected) => {\n  const option = document.createElement(\"option\");\n  option.innerText = text;\n\n  if (value) {\n    option.setAttribute(\"value\", value);\n  }\n\n  if (selected) {\n    option.setAttribute(\"selected\", selected);\n  }\n\n  return option;\n};\n\nexport const createSelect = (commandId, title, options, execCommand) => {\n  const select = document.createElement(\"select\");\n  select.dataset.commandId = commandId;\n  select.className = TOOLBAR_ITEM;\n  select.title = title;\n  select.addEventListener(\"change\", (e) =>\n    execCommand(commandId, e.target.options[e.target.selectedIndex].value)\n  );\n\n  for (const option of options) {\n    select.insertAdjacentElement(\n      BEFORE_END,\n      createOption(option.value, option.text, option.selected)\n    );\n  }\n\n  return select;\n};\n","import { createButton } from \"./button\";\nimport { BEFORE_END, NO } from \"./constants\";\nimport { createIcon } from \"./icon\";\nimport { createInput } from \"./input\";\nimport { createSelect } from \"./select\";\n\nconst createSeparator = () => {\n  const separator = document.createElement(\"span\");\n  separator.className = \"__toolbar-separator\";\n\n  return separator;\n};\n\nexport const createToolbar = (options, execCommand) => {\n  const toolbar = document.createElement(\"div\");\n  toolbar.className = \"__toolbar\";\n\n  // Styles\n  if (options.formatblock !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createSelect(\n        \"formatblock\",\n        \"Styles\",\n        [\n          { value: \"h1\", text: \"Title 1\" },\n          { value: \"h2\", text: \"Title 2\" },\n          { value: \"h3\", text: \"Title 3\" },\n          { value: \"h4\", text: \"Title 4\" },\n          { value: \"h5\", text: \"Title 5\" },\n          { value: \"h6\", text: \"Title 6\" },\n          { value: \"p\", text: \"Paragraph\", selected: true },\n          { value: \"pre\", text: \"Preformatted\" },\n        ],\n        execCommand\n      )\n    );\n  }\n\n  // Font\n  if (options.fontname !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createSelect(\n        \"fontname\",\n        \"Font\",\n        [\n          { value: \"serif\", text: \"Serif\", selected: true },\n          { value: \"sans-serif\", text: \"Sans Serif\" },\n          { value: \"monospace\", text: \"Monospace\" },\n          { value: \"cursive\", text: \"Cursive\" },\n          { value: \"fantasy\", text: \"Fantasy\" },\n        ],\n        execCommand\n      )\n    );\n  }\n\n  // Bold\n  if (options.bold !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\"bold\", \"Bold\", createIcon(\"tes te-bold\"), execCommand)\n    );\n  }\n\n  // Italic\n  if (options.italic !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\"italic\", \"Italic\", createIcon(\"tes te-italic\"), execCommand)\n    );\n  }\n\n  // Underline\n  if (options.underline !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"underline\",\n        \"Underline\",\n        createIcon(\"tes te-underline\"),\n        execCommand\n      )\n    );\n  }\n\n  // Text color\n  if (options.forecolor !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createInput(\"forecolor\", \"Text color\", \"color\", execCommand)\n    );\n  }\n\n  // Separator\n  toolbar.insertAdjacentElement(BEFORE_END, createSeparator());\n\n  // Left align\n  if (options.justifyleft !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"justifyleft\",\n        \"Left align\",\n        createIcon(\"tes te-align-left\"),\n        execCommand\n      )\n    );\n  }\n\n  // Center align\n  if (options.justifycenter !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"justifycenter\",\n        \"Center align\",\n        createIcon(\"tes te-align-center\"),\n        execCommand\n      )\n    );\n  }\n\n  // Right align\n  if (options.justifyright !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"justifyright\",\n        \"Right align\",\n        createIcon(\"tes te-align-right\"),\n        execCommand\n      )\n    );\n  }\n\n  // Separator\n  toolbar.insertAdjacentElement(BEFORE_END, createSeparator());\n\n  // Numbered list\n  if (options.insertorderedlist !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"insertorderedlist\",\n        \"Numbered list\",\n        createIcon(\"tes te-list-ol\"),\n        execCommand\n      )\n    );\n  }\n\n  // Bulleted list\n  if (options.insertunorderedlist !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"insertunorderedlist\",\n        \"Bulleted list\",\n        createIcon(\"tes te-list-ul\"),\n        execCommand\n      )\n    );\n  }\n\n  // Decrease indent\n  if (options.outdent !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"outdent\",\n        \"Decrease indent\",\n        createIcon(\"tes te-indent fa-flip-horizontal\"),\n        execCommand\n      )\n    );\n  }\n\n  // Increase indent\n  if (options.indent !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"indent\",\n        \"Increase indent\",\n        createIcon(\"tes te-indent\"),\n        execCommand\n      )\n    );\n  }\n\n  // Separator\n  toolbar.insertAdjacentElement(BEFORE_END, createSeparator());\n\n  // Clear formatting\n  if (options.removeFormat !== NO) {\n    toolbar.insertAdjacentElement(\n      BEFORE_END,\n      createButton(\n        \"removeFormat\",\n        \"Clear formatting\",\n        createIcon(\"tes te-eraser\"),\n        execCommand\n      )\n    );\n  }\n\n  return toolbar;\n};\n","import { TOOLBAR_ITEM } from \"./constants\";\n\nexport const createInput = (commandId, title, type, execCommand) => {\n  const input = document.createElement(\"input\");\n  input.dataset.commandId = commandId;\n  input.className = TOOLBAR_ITEM;\n  input.title = title;\n  input.type = type;\n  input.addEventListener(\"change\", (e) =>\n    execCommand(commandId, e.target.value)\n  );\n\n  return input;\n};\n","import { BEFORE_BEGIN, NO } from \"./constants\";\nimport { createToolbar } from \"./toolbar\";\n\nconst rgbToHex = (color) => {\n  const digits = /(.*?)rgb\\((\\d+), (\\d+), (\\d+)\\)/.exec(color);\n  const red = parseInt(digits[2]);\n  const green = parseInt(digits[3]);\n  const blue = parseInt(digits[4]);\n  const rgb = blue | (green << 8) | (red << 16);\n\n  return digits[1] + \"#\" + rgb.toString(16).padStart(6, \"0\");\n};\n\nexport const transformToEditor = (editor) => {\n  // Indicate that the element is editable\n  editor.setAttribute(\"contentEditable\", true);\n\n  // Add a custom class\n  editor.className = \"__editor\";\n\n  // Create an exec command function\n  const execCommand = (commandId, value) => {\n    document.execCommand(commandId, false, value);\n  };\n\n  // Set default paragraph to <p>\n  execCommand(\"defaultParagraphSeparator\", \"p\");\n\n  // Create a toolbar\n  const toolbar = createToolbar(editor.dataset, execCommand);\n  editor.insertAdjacentElement(BEFORE_BEGIN, toolbar);\n\n  // Listen for events to detect where the caret is\n  const updateActiveState = () => {\n    const toolbarSelects = toolbar.querySelectorAll(\"select[data-command-id]\");\n    for (const select of toolbarSelects) {\n      const value = document.queryCommandValue(select.dataset.commandId);\n      const option = Array.from(select.options).find(\n        (option) => option.value === value\n      );\n      select.selectedIndex = option ? option.index : -1;\n    }\n\n    const toolbarButtons = toolbar.querySelectorAll(\"button[data-command-id]\");\n    for (const button of toolbarButtons) {\n      const active = document.queryCommandState(button.dataset.commandId);\n      button.classList.toggle(\"active\", active);\n    }\n\n    const inputButtons = toolbar.querySelectorAll(\"input[data-command-id]\");\n    for (const input of inputButtons) {\n      const value = document.queryCommandValue(input.dataset.commandId);\n      input.value = rgbToHex(value);\n    }\n  };\n\n  // Give focus\n  if (editor.dataset.autofocus !== NO) {\n    editor.focus();\n  }\n\n  editor.addEventListener(\"keydown\", updateActiveState);\n  editor.addEventListener(\"keyup\", updateActiveState);\n  editor.addEventListener(\"click\", updateActiveState);\n  toolbar.addEventListener(\"click\", updateActiveState);\n};\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { transformToEditor } from \"./editor\";\nimport \"./style.css\";\n\ndocument.querySelectorAll(\"[data-tiny-editor]\").forEach(transformToEditor);\n\nwindow.__tinyEditor = {\n  transformToEditor,\n};\n"],"names":["BEFORE_END","TOOLBAR_ITEM","NO","createButton","commandId","title","children","execCommand","button","document","createElement","dataset","className","type","insertAdjacentElement","addEventListener","createIcon","icon","createSelect","options","select","e","target","selectedIndex","value","_step","text","selected","option","_iterator","_createForOfIteratorHelper","s","n","done","innerText","setAttribute","err","f","createSeparator","separator","createToolbar","input","toolbar","formatblock","fontname","bold","italic","underline","forecolor","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","outdent","indent","removeFormat","transformToEditor","editor","updateActiveState","querySelectorAll","_loop","queryCommandValue","Array","from","find","index","_step2","_iterator2","active","queryCommandState","classList","toggle","_step3","digits","red","green","rgb","_iterator3","exec","parseInt","toString","padStart","autofocus","focus","css","ref","insertAt","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","forEach","window","__tinyEditor"],"mappings":"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"}